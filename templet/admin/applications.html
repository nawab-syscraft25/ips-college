{% extends "base.html" %}
{% block content %}
<h1 class="mb-4">Applications</h1>

<form method="get" class="mb-3">
  <div class="row g-2 align-items-center">
    <div class="col-auto">
      <select name="college_id" class="form-select">
        <option value="">All colleges</option>
        {% for col in colleges %}
        <option value="{{ col.id }}" {% if selected_college_id and selected_college_id == col.id %}selected{% endif %}>{{ col.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-auto">
      <button class="btn btn-secondary">Filter</button>
      <a href="/admin/applications" class="btn btn-link">Reset</a>
    </div>
  </div>
</form>

<table class="table table-striped table-bordered align-middle">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>College</th>
      <th>Course</th>
      <th>Status</th>
      <th style="width: 160px;">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for a in applications %}
    <tr>
      <td>{{ a.id }}</td>
      <td>{{ a.name }}</td>
      <td>{{ a.email }}</td>
      <td>{{ a.phone or '—' }}</td>
      <td>{{ a.college.name if a.college else '—' }}</td>
      <td>{{ a.course.name if a.course else '—' }}</td>
      <td>{{ a.status or 'Pending' }}</td>
      <td>
        <form method="post" action="/admin/applications/{{ a.id }}/status" class="d-flex gap-2">
          <select name="status" class="form-select form-select-sm">
            <option value="">Pending</option>
            <option value="In Review" {% if a.status == 'In Review' %}selected{% endif %}>In Review</option>
            <option value="Accepted" {% if a.status == 'Accepted' %}selected{% endif %}>Accepted</option>
            <option value="Rejected" {% if a.status == 'Rejected' %}selected{% endif %}>Rejected</option>
          </select>
          <button class="btn btn-sm btn-outline-primary" type="submit">Update</button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr><td colspan="8" class="text-center">No applications found</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

